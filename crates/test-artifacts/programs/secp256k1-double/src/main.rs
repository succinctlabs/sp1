#![no_main]

use sp1_zkvm::syscalls::syscall_secp256k1_double;

sp1_zkvm::entrypoint!(main);

pub fn main() {
    for _ in 0..10i64.pow(3) {
        // generator.
        // 55066263022277343669578718895168534326250603453777594175500187360389116729240
        // 32670510020758816978083085130507043184471273380659243275938904335757337482424
        let mut a: [u8; 64] = [
            152, 23, 248, 22, 91, 129, 242, 89, 217, 40, 206, 45, 219, 252, 155, 2, 7, 11, 135,
            206, 149, 98, 160, 85, 172, 187, 220, 249, 126, 102, 190, 121, 184, 212, 16, 251, 143,
            208, 71, 156, 25, 84, 133, 166, 72, 180, 23, 253, 168, 8, 17, 14, 252, 251, 164, 93,
            101, 196, 163, 38, 119, 218, 58, 72,
        ];

        syscall_secp256k1_double(a.as_mut_ptr() as *mut [u32; 16]);

        // 2 * generator.
        // 89565891926547004231252920425935692360644145829622209833684329913297188986597
        // 12158399299693830322967808612713398636155367887041628176798871954788371653930
        let b: [u8; 64] = [
            229, 158, 112, 92, 185, 9, 172, 171, 167, 60, 239, 140, 75, 142, 119, 92, 216, 124,
            192, 149, 110, 64, 69, 48, 109, 125, 237, 65, 148, 127, 4, 198, 42, 229, 207, 80, 169,
            49, 100, 35, 225, 208, 102, 50, 101, 50, 246, 247, 238, 234, 108, 70, 25, 132, 197,
            163, 57, 195, 61, 166, 254, 104, 225, 26,
        ];

        assert_eq!(a, b);
    }

    println!("done");
}
